---
title: Prometheus配置Grafana Dashboard
date: 2019-02-17 22:07:39
permalink: /pages/2477.html
categories:
  - 运维观止
  - 兼容并包
  - Prometheus
tags:
  - prometheus
  - grafana
---

上一次我们安装部署了，Prometheus 以及通过部署 node_exporter 监控主机上的资源状态，并且实现了简单的邮件报警功能。本次我们通过部署 Grafana 来进行图形展示，Grafana 为我们提供了非常多的图形模板。



Grafana 官网：https://grafana.com/



## 1、下载安装 Grafana



我们使用最简单的 RPM 包方式来安装，下载链接：https://grafana.com/grafana/download



```sh
$ wget https://s3-us-west-2.amazonaws.com/grafana-releases/release/grafana-5.2.4-1.x86_64.rpm 
$ yum localinstall grafana-5.2.4-1.x86_64.rpm 
```



运行 Grafana 服务，默认监听在 TCP/3000 的端口上，默认用户名和密码为 “admin”。



```sh
$ systemctl start grafana-server
$ systemctl enable grafana-server
```



## 2、配置 Grafana 添加数据源





![image](https://tva2.sinaimg.cn/large/008k1Yt0ly1gryc83c2pvj30qs0kftl8.jpg)





填写对应的配置信息。





![image](https://tva3.sinaimg.cn/large/008k1Yt0ly1gryc89wxdij30ls0bz465.jpg)





- Name：定义数据源的名字；
- Type：数据源类型；
- URL：Prometheus 服务的 IP 地址和端口；



其他保持默认，然后点击测试并保存。



## 3，导入 Dashboard 模板



在 Grafana 官方提供了众多的 Dashboard 模板根据自己的需要下载一个模板导入即可。



我这里下载了一个 node_exporter 的图形模板：https://grafana.com/dashboards/1860

![image](https://tvax4.sinaimg.cn/large/008k1Yt0ly1gryc8fwkedj30i20bxgsl.jpg)







![image](https://tva1.sinaimg.cn/large/008k1Yt0ly1gryc8oemw0j30y50bn7fa.jpg)







![image](https://tva2.sinaimg.cn/large/008k1Yt0ly1gryc8xe8vfj30py0dp7cm.jpg)





注意 localhost 处选择 Prometheus。



导入模板之后，仅修改 Name 和 localhost 选择为我们添加的数据源 Prometheus 即可，导入完成后就可以看到图形啦：





![image](https://tvax3.sinaimg.cn/large/008k1Yt0ly1gryc964lsjj31gf2it1ky.jpg)
